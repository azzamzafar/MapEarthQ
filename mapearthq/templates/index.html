{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <meta charset="utf-8">
    </head>
    <body>
      <div style="text-align:end;">
        <a class="btn btn-outline-success me-2" href="{% url 'download_csv' %}">Download CSV</a>
      </div>
        
   
      <iframe srcdoc="{{ world_map }}" style="height:60vh;width:94vw;margin-left:20px;margin-right:20px;"title="Epicentre Coordinates"></iframe>
     
      
        <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Index</th>
                <th scope="col">Magnitude</th>
                <th scope="col">Latitude(deg)</th>
                <th scope="col">Longitude(deg)</th>
                <th scope="col">Country</th>
                <th scope="col">Time(UTC)</th>

              </tr>
            </thead>
            <tbody>
                {% for listing in listings  %}
                
                <tr>
                    <td></td>          
                    <td>{{listing.Mag}}</td>
                    <td>{{listing.lat}}</td>
                    <td>{{listing.lon}}</td>
                    <td>{{listing.country}}</td>
                    <td>{{listing.time}}</td>
                </tr>
                
                {% endfor %}
              
            </tbody>
          </table>
          <script >
            var table = document.getElementsByTagName('table')[0],
            rows = table.getElementsByTagName('tr'),
            text = 'textContent' in document ? 'textContent' : 'innerText';

            for (var i = 0, len = rows.length; i < len; i++) {
              rows[i].children[0][text] = i ;
            }
    </script>
    </body>
</html>
{% endblock %}